HW 2 Data Science
================
Victoria Mello (vsm2118)
October 4, 2023

# Promblem 1

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

Clean and tidy the datasets:

``` r
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name)

pols = 
  read_csv("./data/pols-month.csv") |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_num)`

``` r
snp = 
  read_csv("./data/snp.csv") |>
  separate(date, into = c("month", "day", "year"), convert = TRUE) |>
  arrange(year, month) |>
  mutate(month = month.name[month]) |>
  select(year, month, close) 
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment = 
  read_csv("./data/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, unemployment)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_abb)`

Merge the three datasets:

``` r
data_538 = 
  left_join(pols, snp) |>
  left_join(x = _, y = unemployment)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
str(data_538)
```

    ## tibble [822 × 13] (S3: tbl_df/tbl/data.frame)
    ##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
    ##  $ month       : chr [1:822] "January" "February" "March" "April" ...
    ##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
    ##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
    ##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
    ##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
    ##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
    ##  $ president   : chr [1:822] "dem" "dem" "dem" "dem" ...
    ##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
    ##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...

The `pols` data has 822 observations and 11 variables and tells us about
the party affiliation distribution (democrat or republican) for
governors and senators for a given year from years 1947 to 2015. It also
tells us whether the sitting president was a democrat or republican. The
`snp` data has 787 observations and 3 variables, ranging from years 0 to
99. The `unemployment` data has 816 observations and 3 variables ranging
from years 1948 to 2015. In Januarys in or after 1975 in which a
democrat was president, the **average unemployment rate was 6.57**. The
average unemployment rate over the same time period in which a
republican was president was 6.47.

# Problem 2

``` r
# Step 1: Read and clean the Mr. Trash Wheel dataset
mr_trash_wheel <- readxl::read_excel("./trashwheel.xlsx", sheet = "Mr. Trash Wheel") %>%
  select(Dumpster, Month, Year, Date, `Weight (tons)`, `Cigarette Butts`, `Homes Powered*`) %>%
  rename(
    Weight_tons = `Weight (tons)`,
    Cigarette_Butts = `Cigarette Butts`,
  ) %>%
  filter(!is.na(Dumpster)) %>%
  mutate(Month = tolower(Month))  
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
mr_trash_wheel <- mr_trash_wheel %>%
  mutate(
    Year = as.integer(Year),
    homes_powered = (Weight_tons * 500) / 1000)
view(mr_trash_wheel)

# Step 2: Import, clean, and organize data for Professor Trash Wheel
professor_trash_wheel <- readxl::read_excel("./trashwheel.xlsx", sheet = "Professor Trash Wheel") %>%
  select(Dumpster, Month, Year, Date, `Weight (tons)`, `Cigarette Butts`) %>%
  rename(
    Weight_tons = `Weight (tons)`,
    Cigarette_Butts = `Cigarette Butts`
  ) %>%
  filter(!is.na(Dumpster)) %>%
  mutate(Month = tolower(Month), Trash_Wheel = "Professor Trash Wheel")

professor_trash_wheel <- professor_trash_wheel %>%
  mutate(
    Year = as.integer(Year),
    homes_powered = (Weight_tons * 500) / 1000)
view(professor_trash_wheel)

# Step 3: Import, clean, and organize data for Gwynnda
gwynnda <- readxl::read_excel("./trashwheel.xlsx", sheet = "Gwynnda Trash Wheel") %>%
  select(Dumpster, Month, Year, Date, `Weight (tons)`, `Cigarette Butts`, `Homes Powered*`) %>%
  rename(
    Weight_tons = `Weight (tons)`,
    Cigarette_Butts = `Cigarette Butts`,
    Homes_Powered = `Homes Powered*`
  ) %>%
  filter(!is.na(Dumpster)) %>%
  mutate(Month = tolower(Month), Trash_Wheel = "Gwynnda")

gwynnda <- gwynnda %>%
  mutate(
    Year = as.integer(Year),
    homes_powered = (Weight_tons * 500) / 1000)
view(gwynnda)
```

``` r
# Step 4: Combine the datasets
combined_data <- bind_rows(mr_trash_wheel, professor_trash_wheel, gwynnda)
view(combined_data)
```

The resulting dataset has 845 observations and 10 variables, covering
the years 2014 to 2023. This dataset combines data from Mr. Trash Wheel,
Professor Trash Wheel, and Gwynnda and includes key variables such as
weight of trash collected in tons, number of cigarette butts, and homes
powered where each ton of trash equates to on average 500 kilowatts of
electricity. For available data, the total weight of trash collected by
Professor Trash Wheel is 0 and the total number of cigarette butts
collected by Gwynnda in July of 2021 is 0.

# Problem 3

``` r
# Read the datasets
MCI_baseline <- read_csv("./data_mci/MCI_baseline.csv")
```

    ## New names:
    ## Rows: 484 Columns: 6
    ## ── Column specification
    ## ──────────────────────────────────────────────────────── Delimiter: "," chr
    ## (6): ...1, Age at the study baseline, 1 = Male, 0 = Female, Years of edu...
    ## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
    ## Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## • `` -> `...1`

``` r
mci_amyloid <- read_csv("./data_mci/mci_amyloid.csv")
```

    ## New names:
    ## Rows: 488 Columns: 6
    ## ── Column specification
    ## ──────────────────────────────────────────────────────── Delimiter: "," chr
    ## (6): Study ID, Time (in years) elapsed since the study baseline to the v...
    ## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
    ## Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## • `NA` -> `NA...3`
    ## • `NA` -> `NA...4`
    ## • `NA` -> `NA...5`
    ## • `NA` -> `NA...6`

``` r
# Rename columns 
MCI_baseline <- MCI_baseline %>%
  rename(
    `ID` = "...1",
    `Age` = "Age at the study baseline",
    `Gender` = "1 = Male, 0 = Female",
    `Education` = "Years of education",
    `APOE4` = "1 = APOE4 carrier, 0 = APOE4 non-carrier",
    `Age_Onset_MCI` = "Age at the onset of MCI; missing if a subject remains MCI free during the follow-up period"
  )

mci_amyloid <- mci_amyloid %>%
  rename(
    `ID` = "Study ID",
    `Time_Elapsed` = "Time (in years) elapsed since the study baseline to the visit where biomarker Amyloid _ 42/40 ratio was measured",
    `Time2` = "NA...3",
    `Time4` = "NA...4",
    `Time6` = "NA...5",
    `Time8` = "NA...6"
  )
```
